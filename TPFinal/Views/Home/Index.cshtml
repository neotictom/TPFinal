@{
    ViewData["Title"] = "Index";
}
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="~/css/site.css">
    <script src="~/js/site.js"></script>
  </head>
  <body>
    <img class="banner" src="~/imgs/banner.jpg">
 <div class=Main>
    <h1 class="pt-3">Productos en oferta</h1>
 </div>
<table class="table">
<div class="flexFix">


  @for(int a = 0; a < 5; a++){
  <div class="card" >
  <div class="card-body">
  <img src="@ViewBag.Productos[a].img" class="card-img-top" alt="...">
  <h5 class="card-title">@ViewBag.Productos[a].Nombre</h5>
<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal" onclick="VerDetalle(@ViewBag.Productos[a].IdProducto)">
  Mostrar info
</button>
<br>
<br>
<form class="d-flex" action='@Url.Action("BuscarProducto")'>
<button type="button" class="btn btn-primary" name="id" id="@ViewBag.Productos[a].IdProducto">
  Agregar al Carrito</button></form>
</div>
  </div>  
 
 }

<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="Nombre">Modal title</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <img class="img-fluid" id="img">
        <div id="Descripcion"></div>
        <div id="Precio"></div>
        <div id="Consumo"></div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

  </table>
@if(ViewBag.UsuarioLogueado != null){
  <h1>Pedidos</h1>
  if(ViewBag.ListaPedidos == null){
    <h2>Este Usuario aun no ha hecho pedidos</h2>
  }else{
@foreach(Pedido p in ViewBag.ListaPedidos){
  <table class="table table-striped">
  <thead>
    <tr>
      <th scope="col">Comp</th>
      <th scope="col">Nombre</th>
      <th scope="col">Precio</th>
      
    </tr>
  </thead>
  <tbody>
  @if(p.Motherboard > 0)
  {
    <tr>
      <th scope="row">Motherboard</th>
      <td>@ViewBag.Prods[p.Motherboard-1].Nombre</td>
      <td>@ViewBag.Prods[p.Motherboard-1].Precio</td>
      
    </tr>
    }
    @if(p.CPU > 0)
    {
    <tr>
      <th scope="row">CPU</th>
      <td>@ViewBag.Prods[p.CPU-1].Nombre</td>
      <td>@ViewBag.Prods[p.CPU-1].Precio</td>
    </tr>
    }
    @if(p.RAM > 0)
    {
    <tr>
      <th scope="row">RAM</th>
      <td>@ViewBag.Prods[p.RAM-1].Nombre</td>
      <td>@ViewBag.Prods[p.RAM-1].Precio</td>
    </tr>
    }
    @if(p.GPU > 0)
    {
    <tr>
      <th scope="row">GPU</th>
      <td>@ViewBag.Prods[p.GPU-1].Nombre</td>
      <td>@ViewBag.Prods[p.GPU-1].Precio</td>
    </tr>
    }
    @if(p.Almacenamiento > 0)
    {
    <tr>
      <th scope="row">Almacenamiento</th>
      <td>@ViewBag.Prods[p.Almacenamiento-1].Nombre</td>
      <td>@ViewBag.Prods[p.Almacenamiento-1].Precio</td>
    </tr>
    }
    @if(p.Cooler > 0)
    {
    <tr>
      <th scope="row">Cooler</th>
      <td>@ViewBag.Prods[p.Cooler-1].Nombre</td>
      <td>@ViewBag.Prods[p.Cooler-1].Precio</td>
    </tr>
    }
    @if(p.Fuente > 0)
    {
    <tr>
      <th scope="row">Fuente</th>
      <td>@ViewBag.Prods[p.Fuente-1].Nombre</td>
      <td>@ViewBag.Prods[p.Fuente-1].Precio</td>
    </tr>
    }
    @if(p.Gabinete > 0)
    {
    <tr>
      <th scope="row">Gabinete</th>
      <td>@ViewBag.Prods[p.Gabinete-1].Nombre</td>
      <td>@ViewBag.Prods[p.Gabinete-1].Precio</td>
    </tr>
    }
    <tr>
      <th scope="row">Total:</th>
      <td></td>
      <td>@p.Total</td>
      
    </tr>
  </tbody>
</table>
}

  }
}else{


}

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
  </body>
</html>
